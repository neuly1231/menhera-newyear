@font-face {
    font-family: 'SolmoeKimDaegeon';
    src: url('https://cdn.jsdelivr.net/gh/projectnoonnu/noonfonts-20-12@1.0/kdg_Light.woff') format('woff');
    font-weight: 300;
}
@font-face {
    font-family: 'SolmoeKimDaegeon';
    src: url('https://cdn.jsdelivr.net/gh/projectnoonnu/noonfonts-20-12@1.0/kdg_Medium.woff') format('woff');
    font-weight: 500;
}

:root {
    --bg-color: #fff8e1;
    --accent-color: #ff6f00;
    --text-color: #4e342e;
    --card-bg: #ffffff;
    --pot-color: #78909c;
    --shadow-color: rgba(0, 0, 0, 0.15);
}

* { box-sizing: border-box; -webkit-tap-highlight-color: transparent; user-select: none; }

body {
    background-color: var(--bg-color);
    /* 격자 무늬 배경 패턴 추가 */
    background-image: 
        linear-gradient(rgba(255, 160, 0, 0.1) 1px, transparent 1px),
        linear-gradient(90deg, rgba(255, 160, 0, 0.1) 1px, transparent 1px);
    background-size: 20px 20px;
    
    font-family: 'SolmoeKimDaegeon', sans-serif;
    margin: 0; padding: 0;
    display: flex; justify-content: center; align-items: center;
    min-height: 100vh; overflow-x: hidden;
    color: var(--text-color);
}

.container { 
    text-align: center; width: 100%; max-width: 500px; 
    padding: 20px;
    position: relative;
}

/* 메인 타이틀 - 게임 로고 느낌 */
.main-title { 
    font-size: 2.2rem; 
    margin-bottom: 30px; 
    color: #d84315;
    text-shadow: 2px 2px 0px #fff, 4px 4px 0px rgba(0,0,0,0.1);
    line-height: 1.3;
}

/* 재료 카드 영역 - 둥둥 떠있는 효과 */
.ingredient-stage { 
    min-height: 400px; 
    position: relative; 
    display: flex; 
    flex-direction: column; 
    align-items: center; 
    justify-content: center;
}

.ingredient-card {
    background: var(--card-bg);
    border-radius: 25px;
    padding: 20px;
    width: 280px;
    box-shadow: 0 10px 25px var(--shadow-color);
    border: 4px solid #fff;
    cursor: pointer;
    transition: transform 0.2s;
    animation: float 3s ease-in-out infinite; /* 둥둥 뜨는 애니메이션 */
    position: relative;
    z-index: 10;
}

.ingredient-card:active {
    transform: scale(0.95);
}

@keyframes float {
    0% { transform: translateY(0px); }
    50% { transform: translateY(-10px); }
    100% { transform: translateY(0px); }
}

/* 말풍선 디자인 수정: 긴 글씨 줄바꿈 처리 */
.comment-bubble {
    background: #fff; 
    border: 2px solid var(--text-color); 
    border-radius: 12px;
    padding: 12px 15px; 
    margin-bottom: 20px; 
    display: inline-block;
    
    font-size: 1.1rem; 
    line-height: 1.4; /* 줄 간격 확보 */
    position: relative;
    box-shadow: 4px 4px 0px rgba(0,0,0,0.1);
    
    /* 핵심 수정 사항: 크기 제한 및 줄바꿈 강제 */
    width: auto;
    max-width: 240px; /* 카드 너비(280px)보다 작게 설정하여 안쪽에 배치 */
    word-break: keep-all; /* 한글 단어 단위로 끊기 */
    overflow-wrap: anywhere; /* 띄어쓰기 없는 긴 단어도 강제로 줄바꿈 */
}
.comment-bubble::after {
    content: ''; position: absolute; bottom: -10px; left: 50%; transform: translateX(-50%);
    border-width: 10px 10px 0; border-style: solid; border-color: var(--text-color) transparent;
}

.provider-text { 
    font-size: 1rem; 
    color: #8d6e63; 
    margin: 10px 0 5px; 
    font-weight: bold;
}

/* 이미지 컨테이너 */
.img-wrapper {
    background: #fff3e0;
    border-radius: 50%;
    width: 180px; height: 180px;
    margin: 10px auto;
    display: flex; align-items: center; justify-content: center;
    border: 3px dashed #ffcc80;
}

.img-wrapper img {
    width: 140px; height: 140px; 
    object-fit: contain;
    filter: drop-shadow(0 4px 6px rgba(0,0,0,0.2));
}

.name-text { 
    font-size: 1.6rem; 
    font-weight: 600; 
    color: #d84315; 
    margin-top: 10px; 
    display: block; 
}

#instructionText { 
    font-size: 1.1rem; 
    color: #ff6f00; 
    margin-bottom: 15px; 
    animation: blink 2s infinite;
    font-weight: bold;
}
@keyframes blink { 50% { opacity: 0.5; } }

/* 냄비 디자인 - 입체감 추가 */
.pot-container { 
    position: relative; 
    width: 280px; 
    margin: 40px auto 20px; 
}
.pot { 
    position: relative; 
    width: 100%; 
    height: 150px; 
    z-index: 5; 
}
.pot-body {
    position: absolute; bottom: 0; width: 100%; height: 100%;
    background: linear-gradient(135deg, #cfd8dc, #90a4ae);
    border-radius: 10px 10px 80px 80px;
    border: 4px solid #455a64;
    overflow: hidden;
    box-shadow: inset 10px -10px 20px rgba(0,0,0,0.1);
}

/* 냄비 광택 효과 */
.pot-body::after {
    content: '';
    position: absolute;
    top: 10px; right: 20px;
    width: 30px; height: 80px;
    background: rgba(255,255,255,0.3);
    border-radius: 50%;
    transform: rotate(20deg);
}

.soup {
    position: absolute; bottom: 0; left: 0; width: 100%; height: 0%;
    background-color: #ffffff; 
    transition: height 0.6s cubic-bezier(0.34, 1.56, 0.64, 1), background-color 1s ease;
    opacity: 0.9;
}
/* 국물 표면 물결 */
.soup::before {
    content: ''; position: absolute; top: -5px; left: 0; width: 100%; height: 10px;
    background: inherit; border-radius: 50%; opacity: 0.5;
}

.pot-handle { 
    width: 40px; height: 20px; 
    background: #455a64; 
    position: absolute; top: 30px; 
    border-radius: 5px;
    box-shadow: 0 2px 0 rgba(0,0,0,0.3);
}
.pot-handle.left { left: -30px; border-radius: 10px 0 0 10px; }
.pot-handle.right { right: -30px; border-radius: 0 10px 10px 0; }

/* 재료 투하 애니메이션 */
.move-to-pot { 
    animation: dropIn 0.6s forwards cubic-bezier(0.55, 0.085, 0.68, 0.53); 
    pointer-events: none; /* 애니메이션 중 중복 클릭 방지 */
}
@keyframes dropIn {
    0% { transform: translateY(0) rotate(0deg) scale(1); opacity: 1; }
    100% { transform: translateY(300px) rotate(45deg) scale(0.3); opacity: 0; }
}

/* 김이 모락모락 */
.steam-container { position: absolute; top: -50px; left: 50%; transform: translateX(-50%); display: none; }
.steam {
    width: 15px; height: 40px; background: #fff;
    margin: 0 5px; display: inline-block; border-radius: 50%;
    filter: blur(6px); animation: rise 1.5s infinite; opacity: 0;
}
.steam:nth-child(2) { animation-delay: 0.5s; height: 50px; }
.steam:nth-child(3) { animation-delay: 1.0s; }

@keyframes rise {
    0% { transform: translateY(0) scale(1); opacity: 0.6; }
    100% { transform: translateY(-60px) scale(1.5); opacity: 0; }
}

.shaking { animation: shake 0.1s infinite alternate; }
@keyframes shake { from { transform: rotate(-2deg); } to { transform: rotate(2deg); } }

#cooking-status { 
    color: #d84315; 
    margin-top: 20px; 
    font-size: 1.4rem;
}

/* --- 결과 페이지 --- */
.hidden { display: none !important; }

#result-page {
    background: #fff;
    border-radius: 30px;
    border: 5px solid #d84315;
    padding: 30px 20px;
    box-shadow: 0 15px 30px rgba(0,0,0,0.2);
    margin-top: 20px;
    animation: popUp 0.5s ease-out;
}
@keyframes popUp {
    from { transform: scale(0.8); opacity: 0; }
    to { transform: scale(1); opacity: 1; }
}

.result-title { 
    font-size: 2.5rem; color: #bf360c; 
    margin-top: 0;
    text-shadow: 2px 2px 0 #ffcc80;
}

.final-photo-wrapper {
    position: relative;
    display: inline-block;
    margin: 10px 0;
}
/* 폴라로이드 사진 느낌 */
.final-photo { 
    width: 100%; max-width: 300px; 
    border-radius: 10px; 
    border: 8px solid #fff; 
    box-shadow: 0 5px 15px rgba(0,0,0,0.2); 
    transform: rotate(-2deg);
}

.ingredient-summary {
    background: #fafafa; 
    padding: 20px; 
    border-radius: 15px; 
    border: 2px dashed #bdbdbd; 
    margin: 20px 0;
    text-align: left;
    max-height: 300px;
    overflow-y: auto;
}
.ingredient-summary h3 { 
    margin-top: 0; 
    font-size: 1.3rem; 
    color: #5d4037; 
    border-bottom: 2px solid #eeeeee; 
    padding-bottom: 10px; 
}
.ingredient-summary ul { list-style: none; padding: 0; margin: 0; }
.ingredient-summary li { 
    padding: 8px 0; 
    border-bottom: 1px solid #f0f0f0; 
    display: flex; justify-content: space-between; 
    font-size: 1.05rem; 
}
.ingredient-summary li:last-child { border-bottom: none; }
.provider-tag { 
    background: #ffecb3; 
    color: #f57f17; 
    padding: 2px 8px; 
    border-radius: 8px; 
    font-size: 0.9rem; 
    font-weight: bold;
}

/* 다시하기 버튼 - 3D 버튼 느낌 */
.retry-btn {
    padding: 15px 40px; 
    background: #d84315; 
    color: #fff; 
    border: none; 
    border-radius: 50px;
    font-family: inherit; 
    font-size: 1.3rem; 
    cursor: pointer;
    box-shadow: 0 6px 0 #9e2a00, 0 10px 10px rgba(0,0,0,0.2);
    transition: all 0.1s;
    margin-top: 10px;
}
.retry-btn:active {
    transform: translateY(6px);
    box-shadow: 0 0 0 #9e2a00, inset 0 2px 5px rgba(0,0,0,0.2);
}

/* 모바일 대응 */
@media (max-width: 400px) {
    .main-title { font-size: 1.8rem; }
    .ingredient-card { width: 240px; padding: 15px; }
    .img-wrapper { width: 140px; height: 140px; }
    .img-wrapper img { width: 100px; height: 100px; }
    .pot-container { width: 240px; }
    .pot { height: 120px; }
}